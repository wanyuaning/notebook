<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <canvas id="myCanvas" width="1000" height="600"></canvas>

  <div>
    <button onclick="stage.clean()">clear</button>
  </div>
  
</body>
</html>
<script type="text/javascript">



  class Stage{
    #canvas
    #context
    #width
    #height
    constructor(canvas, width, height){
      this.#canvas = canvas
      this.#context = canvas.getContext("2d")
      this.#width = width
      this.#height = height
    }
    clean(){ this.#context .clearRect(0, 0, this.#width, this.#height) }    
    drawRect(x, y, width, height, options){ 
      if (!options) { console.error('Stage: drawRect(x, y, width, height, options), Please configure options'); return }
      Object.assign(this.#context, options || {})
      this.#context.beginPath()
      options.fillStyle && this.#context.fillRect(x, y, width, height)
      options.strokeStyle && this.#context.strokeRect(x, y, width, height)
    }
    drawCircle(x, y, r, options){
      if (!options) { console.error('Stage: drawCircle(x, y, r, options), Please configure options'); return }
      Object.assign(this.#context, options || {})
      this.#context.beginPath()
      this.#context.arc(x, y, r, 0, 2*Math.PI, false);
      this.#context.closePath();
      options.fillStyle && this.#context.fill();
      options.strokeStyle && this.#context.stroke();
    }
    drawText(text, x, y, options){
      if (!options) { 
        console.error('Stage: drawText(text, x, y, options), Please configure options')
        console.info('For example: {fillStyle:"#999", strokeStyle:"#000", maxWidth:100, font:"20px Arial", textBaseline:"top", textAlign:"center"}')
        return 
      }
      if (options.font && options.font.indexOf(' ') < 0) options.font += ' Arial'
      Object.assign(this.#context, options)
      let maxWidth = options.maxWidth || this.#context.measureText(text).width
      this.#context.beginPath()
      options.fillStyle && this.#context.fillText(text, x, y, maxWidth)
      options.strokeStyle && this.#context.strokeText(text, x, y, maxWidth)
    }
    drawLine(start, end, options){
      if (!options) { 
        console.error('Stage: drawLine(start, end, options), Please configure options')
        console.info('For example: {strokeStyle:"#000", lineWidth:5, lineCap:"round"}')
        return 
      }
      Object.assign(this.#context, options)
      this.#context.beginPath();
      this.#context.lineTo(start[0], start[1]);
      this.#context.lineTo(end[0], end[1]);
      options.strokeStyle && this.#context.stroke();
    }
    drawPolygon(pointsArr, options){
      if (!options) { 
        console.error('Stage: drawPolygon(pointsArr, options), Please configure options')
        console.info('For example: {fillStyle:"#ccc", strokeStyle:"#000", lineWidth:5, lineCap:"round"}')
        return 
      }
      Object.assign(this.#context, options)
      options.strokeStyle && this.#context.stroke();
    }
    /**
     * 多边形
     */
    drawPolygonFill(pointsArr, style){
      let context = this.#context;
      context.beginPath();
      for(var i=0,len=pointsArr.length;i<len-1;i++){
					var start=pointsArr[i],end=pointsArr[i+1];
					context.lineTo(start[0],start[1]);
					context.lineTo(end[0],end[1]);
			}
      context.closePath();
      context.fillStyle = style;
      context.fill();
    }
    drawPolygonStroke(pointsArr, style, lineWidth){
      let context = this.#context;
      context.beginPath();
      for(var i=0,len=pointsArr.length;i<len-1;i++){
					var start=pointsArr[i],end=pointsArr[i+1];
					context.lineTo(start[0],start[1]);
					context.lineTo(end[0],end[1]);
			}
      context.closePath();
      context.lineWidth = lineWidth;
      context.strokeStyle = style;
      context.stroke();
    }
    /**
     * 图片
     * img	          规定要使用的图像、画布或视频。
       sx	sy	        可选。开始剪切的 xy 坐标位置。
       swidth sheight	可选。被剪切图像的宽度高度。
       x y	          在画布上放置图像的 xy 坐标位置。
       width height	  可选。要使用的图像的宽度高度。（伸展或缩小图像）
     */
    drawImage(img, sx, sy, swidth, sheight, x, y, width, height){
      let context = this.#context;
      context.drawImage(img, sx, sy, swidth, sheight, x, y, width, height)
    }
    aa(){
      context.save();
      context.translate(this.x + halfWith, this.y + halfHeight);
      context.rotate(((this.angle * Math.PI) / 180) * -1);
      context.drawImage(this.image, this.imgX, this.imgY, this.imgWidth, this.imgHeight, -halfWith, -halfHeight, this.width, this.height);
      context.restore();
    }
  }

  let stage = new Stage(document.getElementById("myCanvas"), 1000, 600)
  stage.drawRect(10, 10, 100, 50, {fillStyle: '#0f0'})
  stage.drawCircle(200, 35, 25, {fillStyle: '#f00', strokeStyle: '#000', lineWidth: 5})
  stage.drawText('123456789', 10, 70, {fillStyle: '#f00', font: '30px'})
  stage.drawLine([10,90], [200,100], {strokeStyle:'#00f', lineWidth:10, lineCap: 'round'})
  stage.drawLine([10,120], [200,130], {strokeStyle:'#0f0', lineWidth:5})
  // stage.drawRectFill(10, 10, 50, 50, '#f00')
  // stage.drawRectStroke(80, 10, 50, 50, '#0f0')
  // stage.drawCircleFill(170, 35, 25, 0, Math.PI*2, false, '#0f0')
  // stage.drawCircleStroke(240, 35, 25, 0, Math.PI*2, false, '#0f0')
  // stage.drawTextFill("文本样本", "20px Georgia", null, 'left', 200, '#f00', 300, 40)
  // stage.drawTextStroke("文本样本", "20px Georgia", null, 'left', 200, '#f00', 400, 40)
  // stage.drawLine('#00f', 5, [500,35], [600,35])
  // stage.drawPolygonFill([[10,80], [100,80], [100, 180], [20, 180]], '#00f')
  // stage.drawPolygonStroke([[120,80], [200,80], [200, 180], [130, 180]], '#f00')
  // var img = new Image()
  // img.onload = function(){
  //   stage.drawImage(this, 0, 0, 202, 205, 10, 220, 80, 80)
  // }
  // img.src = '001.png'
  
  

</script>

  

  
  
  
  
