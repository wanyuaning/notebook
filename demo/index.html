<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=750, user-scalable=no, target-densitydpi=device-dpi">
    <title>Document</title>
    <style>
        body{
            margin: 0;
            text-align: center;
        }
        .app-wrapper{
            margin: auto;
            text-align: left;
            width: 750px; 
            min-height: 1870px; 
            background: #ae0a0a url(images/bg.png) no-repeat 0 0/100% auto;
        }
        .block-video{
            height: 385px;
            box-sizing: border-box;
            padding-top: 19px; 
            text-align: center;
        }
        .video-wrapper{
            margin: auto;
            width: 720px; 
            height: 345px;
            box-sizing: border-box;
            padding: 10px; 
            border-radius: 15px; 
            background-color: #c61113; 
            box-shadow: 1px 2px 10px rgba(0,0,0,.1);
        }
        .video-view{
            width: 700px; 
            height: 325px; 
            border-radius: 10px; 
            overflow: hidden;
            position: relative;
        }
        .video-view .mask{
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, .4);
            line-height: 325px;
            opacity: 1;
        }
        .video-view .mask.close{
            opacity: 0;
            transition:all 2s ease;
        }
        .video-view .mask img{
            vertical-align: middle;
            opacity: 0.5;
        }
        .video-view .mask:hover img{
            opacity: 1;
            transition:all 0.5s ease;
        }


        .block-ad-slogan{
            height: 247px;
            padding-top: 48px;
            box-sizing: border-box; 
        }
        .block-ad-content{
            height: 240px;
            box-sizing: border-box; 
            padding: 58px 0 0 88px;
            position: relative;
        }
        .block-ad-content img{
            position: absolute;
            top: 58px;
            left: 88px;
        }
        .block-ad-content span{
            color: #ffeec0; 
            font-size: 64px; 
            font-weight: bold;
            line-height: 64px;
            display: block; padding-left: 228px; 
        }
        .block-ad-content p{
            color: #ffeec0; font-size: 28px; margin: 0; padding: 20px 0 0 45px;
        }
        .block-types{
            height: 270px;
            box-sizing: border-box; 
            padding-top: 90px;
            text-align: center;
        }
        .block-list{
            height: 352px;
            text-align: left;
        }
        .block-list .list-ul{
            list-style-type: none;
            padding: 0 0 0 122px;
            margin: 0;
        }
        .block-list li{
            font-size: 36px;
            font-weight: bold;
            color: #ffeec0;
            line-height: 65px;
            padding-left: 62px;
            
            
            background: url(./images/icon-checked.png) no-repeat left center;
        }
        .block-last{
            padding-top: 58px;
            text-align: center;
        }

        .common-line{
            height: 19px;
            background: url(./images/space-line.png) no-repeat center;
        }

    </style>
</head>
<body>
    <div class="app-wrapper">
        <div class="block-video">
            <div class="video-wrapper">
                <div class="video-view">
                  <!-- 
                  webkit-playsinline="true"         IOS10中设置可以让视频在小窗内播放，也就是不是全屏播放
                  playsinline="true"                IOS微信浏览器支持小窗内播放
                  x-webkit-airplay="allow" 
                  x5-video-player-type="h5"         启用H5播放器,是wechat安卓版特性
                  x5-video-player-fullscreen="true" 全屏设置，设置为true是防止横屏
                  x5-video-orientation="portraint"  播放器的方向，landscape横屏，portraint竖屏，默认值为竖屏 
                  -->
                  <video
                    id="video" 
                    width="700"
                    height="325"
                    controls = "true"
                    poster="images/banner.png"  
                    preload="auto" 
                    webkit-playsinline="true"        
                    playsinline="true"              
                    x-webkit-airplay="allow" 
                    x5-video-player-type="h5"      
                    x5-video-player-fullscreen="true" 
                    x5-video-orientation="portraint" 
                    style="object-fit:fill"
                    >
                  </video>
                  <div class="mask" id="video-mask">
                      <img src="images/icon-play.png" id="btn-play"/>
                  </div>
                </div>
            </div>
        </div>
        <div class="block-ad-slogan">
            <img src="images/ad-text.png"/>
        </div>
        <div class="common-line"></div>
        <div class="block-ad-content">
            <img src="images/text-jiameng.png"/>
            <!-- 加盟总代理微信：（稳赚不赔） -->
            <span id="wx-placeholder-1"></span>
            <p>添加微信，送下线1名（0投资0操作）</p>
        </div>
        <div class="common-line"></div>
        <div class="block-types">
            <img src="images/types.png"/>
        </div>
        <div class="block-list">
            <ul class="list-ul">
                <li>北京赛车.时时彩.精准计划</li>
                <li>开户网址:<span id="account-url"></span></li>
                <li>美女导师微信:<span id="wx-placeholder-2"></span></li>
                <li>首存即送18-58888彩金</li>
            </ul>
        </div>
        <div class="common-line"></div>
        <div class="block-last">
            <img src="images/ad-text2.png"/>
        </div>
    </div>
    
</body>
</html>
<script>

  
  ;(function(){
    const CONF = {
      URL_Video: 'videos/demo.mp4',                   // 视频源
      WX_GeneralAgent: '12345678',                    // 总代理微信
      WX_Mentor: ['55883345', '55883346', '55883347'],// 导师微信集
      URL_Account: 'www.baidu.com'                    // 开户网址
    }

    const dom_account_url = document.querySelector('#account-url')
    const dom_wx_1 = document.querySelector('#wx-placeholder-1')
    const dom_wx_2 = document.querySelector('#wx-placeholder-2')
    const dom_mask = document.querySelector('#video-mask')
    const btn_play = document.querySelector('#btn-play')

    const video = document.querySelector('video');
    const mimeCodec = 'video/mp4; codecs="avc1.42E01E, mp4a.40.2"';
    
    if ('MediaSource' in window && MediaSource.isTypeSupported(mimeCodec)) {
      var mediaSource = new MediaSource();
      video.src = URL.createObjectURL(mediaSource); // 把mediaSource作为objectURL附加到video标签上
      mediaSource.addEventListener('sourceopen', sourceOpen);
    } else {
      //video.src = CONF.URL_Video
    }

    function sourceOpen () {
      const mediaSource = this; 
      let sourceBuffer = mediaSource.addSourceBuffer(mimeCodec); 
      //发起网络请求
      fetch(CONF.URL_Video)
      .then(res => res.arrayBuffer())
      .then((buf) => {console.log(buf)
        sourceBuffer.addEventListener('updateend', function (_) {
          console.log(_)
          console.log(mediaSource)
          mediaSource.endOfStream();
          //video.play();
        });
        sourceBuffer.appendBuffer(buf);
      })
      .catch(e => console.log(e))
    }

    btn_play.addEventListener('click', () =>{
      dom_mask.className = 'mask close'
      video.play()
    })

    dom_account_url.innerText = CONF.URL_Account
    dom_wx_1.innerText = CONF.WX_GeneralAgent
    dom_wx_2.innerText = CONF.WX_Mentor[1]
  }())
</script>